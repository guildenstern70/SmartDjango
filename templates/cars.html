{% extends "base-nav.html" %}
{% load icon %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
    <title> SmartDjango | {{ title }} </title>
{% endblock %}

{% block pagecss %}
    <link rel="stylesheet" type="text/css" href="{% static "SmartDjango/css/homepage.css" %}">
{% endblock %}

{% block main %}
    <div class="container">
        <h1 class="mt-2">{{ title}}</h1>
      <div class="row">
        <div class="col-sm">
            {% for car in cars %}
                <div class="card" style="width: 18rem;">
                  <img src="{% static "SmartDjango/{{ car.image_path }}" %}" class="card-img-top p-4" alt="Car">
                  <div class="card-body">
                    <h5 class="card-title">{{ car.name }}</h5>
                    <p class="card-text">{{ car.description }}</p>
                    <a href="#" class="btn btn-primary">Cancel</a>
                  </div>
                </div>
            {% empty %}
                <p>Car database is empty.</p>
            {% endfor %}
        </div>
      </div>
    <div class="row">
        <div class="col-sm">
            <button class="btn btn-primary mt-2 mb-2"
                    data-bs-toggle="modal"
                    data-bs-target="#insertCarModal" role="button">Add new car</button>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="insertCarModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
            {% if messages %}
                    <div class="alert alert-warning alert-dismissible fade show" role="alert">
                      <strong>New car insert</strong>
                      <ul class="messages">
                        {% for message in messages %}
                        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                        {% endfor %}
                      </ul>
                      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
            {% endif %}
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Insert new car</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            {% crispy form %}
          </div>
        </div>
      </div>
    </div>

{% endblock %}

{% block extrajavascript %}
    <script src="{% static 'SmartDjango/js/cars.js' %}"></script>
{% endblock %}

